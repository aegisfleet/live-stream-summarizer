# Coding Guidelines for Live Stream Summarizer

## 1. はじめに

このドキュメントは、Live Stream Summarizerプロジェクトのコーディング標準とベストプラクティスを定義します。目的は、コードの品質、一貫性、保守性を確保することです。今後のすべてのコード生成・修正は、このガイドラインに従うものとします。

## 2. 基本原則

### 2.1. 関心の分離 (Separation of Concerns)

このプロジェクトでは、構造（HTML）、見た目（CSS）、ロジック（JavaScript）を厳密に分離します。

- **JavaScript (JS)**: アプリケーションのロジック、データの取得・操作、イベントハンドリング、DOM要素の動的生成を担当します。
- **CSS**: すべての視覚的なスタイリング、レイアウト、アニメーションを担当します。
- **HTML**: 静的な骨格を提供し、動的コンテンツのコンテナとして機能します。

**【最重要ルール】** JavaScriptは、要素のスタイルを直接操作してはいけません（例: `element.style.backgroundColor = 'red'`）。代わりに、CSSクラスを追加・削除することでスタイルを制御します。CSSは、そのクラスに基づいて適切なスタイルを適用します。

**良い例と悪い例:**

```javascript
// 悪い例: 直接的なスタイル操作
element.style.backgroundColor = '#e9ecef';

// 良い例: クラスの付け外し
element.classList.add('is-hovered');
```

```css
/* スタイリングはCSSが担当する */
.is-hovered {
    background-color: #e9ecef;
}
```

## 3. JavaScript (JS) ガイドライン

### 3.1. DOM操作とイベントハンドリング

- **クラスベースのスタイリング**: 要素の見た目を制御するには、`element.classList.add()` / `remove()` / `toggle()` を使用します。
- **イベントリスナー**: イベントリスナーはプログラムでアタッチします。リスナー関数は簡潔に保ち、複雑なロジックは別のメソッドを呼び出すようにします。

### 3.2. コード構造

- **クラスの活用**: `ArchiveManager`のように、状態と関連ロジックをカプセル化するためにES6クラスを使用し、整理された再利用可能なコードを目指します。
- **モジュール性**: 複雑なタスクは、単一責任の小さなヘルパーメソッド（例: `createArchiveCard`, `timestampToSeconds`）に分割します。

## 4. CSS ガイドライン

### 4.1. セレクタと命名規則

- **クラスベースのセレクタ**: スタイリングには、明確で説明的なクラス名（例: `.archive-card`, `.clickable-title`）を使用します。
- **状態を表すクラス**: `is-active` や `is-hidden` のように、要素の状態をプレフィックス付きのクラス名で表現することを推奨します。

### 4.2. インタラクティビティとアニメーション

- **視覚的フィードバック**: ユーザーインタラクションに対するフィードバック（ホバー、フォーカス、アクティブ状態）は、すべてCSSの疑似クラス（`:hover`, `:focus`）で定義します。
- **トランジション**: 状態変化（色、透明度など）を滑らかに見せるために `transition` プロパティを使用し、優れたユーザー体験を提供します。

### 4.3. テーマと変数

- **CSSカスタムプロパティ**: グローバルなテーマ値（色、フォント、間隔など）は、`:root` スコープでCSS変数として定義します。これにより、テーマの変更が容易になり、アプリケーション全体の一貫性が保たれます。

```css
:root {
    --primary-color: #4a4a4a;
    --card-background: #ffffff;
}

.button {
    background-color: var(--primary-color);
}
```

## 5. ユーザー体験 (UX) とアクセシビリティ (A11y)

- **明確なアフォーダンス**: どの要素がインタラクティブであるかが視覚的に明確でなければなりません。
  - すべてのクリック可能な要素に `cursor: pointer;` を適用します。
  - 明確な `:hover` スタイルを提供します。
- **情報提供**: インタラクティブな要素には `title` 属性を使用して、アクションを説明するツールチップを表示します（例: `title="クリックして 02:10 から再生"`）。
- **セマンティックHTML**: JSで要素を作成する際は、最も意味的に適切なタグ（ボタンには`<button>`、カードタイトルには`<h2>`、リストには`<ul>`/`<li>`）を使用します。
