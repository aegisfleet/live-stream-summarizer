# ホロライブ配信アーカイブ要約サイト 要件定義書

## 1. 概要

### 1.1. 目的

本プロジェクトは、ホロライブプロダクションに所属するタレントのライブ配信アーカイブについて、内容の要約を一覧で閲覧できるWebサイトを構築することを目的とする。視聴者は長時間のアーカイブを視聴することなく、配信の概要や見どころを短時間で把握でき、興味のある配信を見つけやすくなることを目指す。

### 1.2. 背景

日々数多くのライブ配信が行われており、ファンがすべてのアーカイブを視聴することは時間的に困難である。配信内容をAIによって自動で要約し提供することで、ファンがより多くのコンテンツに触れる機会を創出し、コミュニティの活性化に貢献する。

### 1.3. スコープ

- **対象:** ホロライブプロダクション所属タレントのYouTubeライブ配信アーカイブ。
- **対象外:**
  - メンバーシップ限定配信。
  - YouTube以外のプラットフォームでの配信。
  - プレミア公開された動画（ライブ配信ではないため）。

---

## 2. システム構成

### 2.1. システム構成図

本システムは、GitHub Actionsを中核としてデータ収集・加工・コンテンツ生成を自動化し、GitHub Pagesで静的サイトとして公開する構成を取る。

### 2.2. 利用技術スタック

- **フロントエンド:** HTML, CSS, JavaScript
- **ホスティング:** GitHub Pages
- **CI/CD・自動化:** GitHub Actions
- **コンテンツ生成:** Gemini API (モデル: gemini-2.5-flash)
- **データソース:**
  - 配信スケジュール: `https://schedule.hololive.tv/simple/hololive`
  - 動画情報: YouTube Data API v3
  - 文字起こし: YouTube Transcript API (または同等のライブラリ)

---

## 3. 機能要件

### 3.1. データ収集・処理機能

| ID | 機能名 | 概要 | 詳細 |
| :--- | :--- | :--- | :--- |
| F-001 | 配信スケジュール取得 | 1時間ごとに公式サイトから配信スケジュールを取得する。 | ・GitHub Actionsの`schedule`トリガーで1時間ごとにワークフローを実行する。<br>・`https://schedule.hololive.tv/simple/hololive`にアクセスし、HTMLコンテンツを取得する。<br>・HTMLをパースし、配信枠のYouTube動画URL、配信者名、配信日時を抽出する。 |
| F-002 | アーカイブ動画の判定 | 取得した動画URLの中から、要約対象となるアーカイブ済み動画を特定する。 | ・YouTube Data APIを使用し、動画のステータスを確認する。<br>・ライブ配信が終了し、アーカイブとして公開されている動画のみを対象とする。<br>・YouTube Transcript API（または同等のライブラリ）を使用し、自動文字起こしが利用可能かを確認する。利用できない動画は処理対象外とする。 |
| F-003 | 配信内容の要約とタグ付け | 動画コンテンツを基に、Gemini APIを利用して配信内容の要約と関連タグの生成を行う。 | ・対象動画のURLと時間範囲をGemini API (gemini-2.5-flash) に送信する。<br>・プロンプトを工夫し、以下の情報を含む要約とタグを生成させる。<br>  - 配信全体の概要（200字程度）<br>  - 主要なトピックや見どころ（箇条書き3〜5点）<br>  - 配信内容を表すタグ（例: `ゲーム実況`, `雑談`, `歌枠` など3〜5個）<br>・生成された要約、タグ、動画URL、タイトル、配信者名、配信日時、サムネイルURLなどを構造化データ（JSON形式）としてリポジトリ内に保存する。 |
| F-004 | サイトコンテンツの自動更新 | 生成された要約データを用いて、GitHub PagesのWebサイトを自動でビルド・デプロイする。 | ・F-003で生成したJSONデータを読み込み、静的HTMLファイルを生成する。<br>・ビルドされた成果物を`gh-pages`ブランチなどにプッシュし、サイトを更新する。 |

### 3.2. Webサイト表示機能

| ID | 機能名 | 概要 | 詳細 |
| :--- | :--- | :--- | :--- |
| F-005 | アーカイブ一覧表示 | 要約済みの配信アーカイブを一覧で表示する。 | ・各配信をカード形式で表示する。<br>・カードには、動画サムネイル、配信タイトル、配信者名、配信日時、要約（概要）、関連タグを表示する。<br>・一覧は、配信日時の**降順**（新しいものが上）で表示する。<br>・カードをクリックすると、YouTubeの動画ページが新しいタブで開く。 |
| F-006 | 配信者フィルタリング | 配信者名で表示されているアーカイブを絞り込む機能を提供する。 | ・画面上部に、サイトに表示されている全配信者の名前をボタンやドロップダウンリストで表示する。<br>・ユーザーが特定の配信者名を選択すると、ページをリロードすることなく、該当する配信者のアーカイブのみを即座に表示する。<br>・複数選択や全選択/全解除も可能とする。 |
| F-007 | タグフィルタリング | 配信内容に関連するタグでアーカイブを絞り込む機能を提供する。 | ・各アーカイブカードに、F-003で生成されたタグを表示する。<br>・画面上部に、サイトに表示されている全タグをボタンなどで表示する。<br>・ユーザーが特定のタグを選択すると、該当するタグを持つアーカイブのみを即座に表示する。<br>・配信者フィルターとタグフィルターは併用可能とする。 |

---

## 4. 非機能要件

| 項目 | 要件 |
| :--- | :--- |
| **パフォーマンス** | ・静的サイトとして生成するため、高速なページ読み込みを実現する (Lighthouse Performance Score 80以上を目指す)。<br>・フィルタリング機能はクライアントサイドJavaScriptで実装し、軽快な操作感を提供する。 |
| **可用性** | ・GitHub PagesのSLAに準拠する。<br>・データ更新のGitHub Actionsワークフローが失敗した場合は、リポジトリのIssueを自動で作成し、管理者に通知する仕組みを導入する。 |
| **セキュリティ** | ・YouTube Data APIキーやGemini APIキーなどの認証情報は、GitHub Secretsに登録し、コード上にはハードコーディングしない。<br>・Dependabotを有効化し、利用しているライブラリの脆弱性を定期的にスキャン・更新する。 |
| **運用・保守性** | ・データ取得、API連携、サイト生成などの各処理は、スクリプトを適切に分割・モジュール化し、可読性とメンテナンス性を高める。<br>・APIエンドポイントや設定値は、設定ファイルで一元管理する。 |
| **デザイン** | ・PC、タブレット、スマートフォンなど、異なるデバイスサイズで閲覧しても表示が崩れないレスポンシブデザインを採用する。 |

---

## 5. 画面イメージ（ワイヤーフレーム）

### PC表示

```text
+----------------------------------------------------------------------+
| ホロライブ配信アーカイブサマリー                                     |
+----------------------------------------------------------------------+
| 配信者: [ときのそら] [ロボ子さん] [さくらみこ] [すべて表示] ...       |
| タグ:   [ゲーム実況] [雑談] [歌枠] [すべて表示] ...                  |
+----------------------------------------------------------------------+
|                                                                      |
| [サムネイル]  【タイトル】大神ミオ                                   |
|              2023-10-27 21:00                                        |
|              [概要] 今日は雑談配信をしました。マシュマロを読みながら |
|              リスナーからの質問に答えたり、最近あった面白い出来事を  |
|              話したりして盛り上がりました。                          |
|              [見どころ]                                              |
|              〇〇の話題で大爆笑                                    |
|              新衣装についてのお知らせ                               |
|              次回のコラボ配信の告知                                |
|              タグ: #雑談 #マシュマロ                                 |
|                                                                      |
+----------------------------------------------------------------------+
| [サムネイル]  【タイトル】宝鐘マリン                                 |
|              2023-10-27 20:00                                        |
|              [概要] ...                                              |
|              タグ: #ゲーム実況 #マイクラ                             |
|                                                                      |
+----------------------------------------------------------------------+
| ...                                                                  |
+----------------------------------------------------------------------+
| © 2023 My Site                                                       |
+----------------------------------------------------------------------+
```

### スマートフォン表示

```text
+---------------------------------+
| ホロライブ配信アーカイブサマリー|
+---------------------------------+
| ▼ フィルター                    |
+---------------------------------+
| [サムネイル]                    |
| 【タイトル】大神ミオ            |
| 2023-10-27 21:00                |
| [概要] 今日は雑談配信をしま...  |
| [見どころ]                      |
| 〇〇の話題で大爆笑            |
| ...                             |
| タグ: #雑談 #マシュマロ         |
+---------------------------------+
| [サムネイル]                    |
| 【タイトル】宝鐘マリン          |
| ...                             |
| タグ: #ゲーム実況 #マイクラ     |
+---------------------------------+
```
