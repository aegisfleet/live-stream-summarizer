# 配信者カテゴリ分類機能 - 要件定義書

## 概要

現在、配信者が50名以上に増加し、サイト上部の配信者一覧が非常に見辛い状況になっています。この問題を解決するため、配信者をホロライブの公式グループ別にカテゴリ分類し、ユーザーが目的の配信者を効率的に見つけられるようにする機能を実装します。

## 要件

### 要件1: タレントマスターデータの管理

**ユーザーストーリー:** システム管理者として、正確なカテゴリ分類を行いたいので、ホロライブ公式サイトのタレント情報を基準としたマスターデータを管理したい

#### 受入基準

1. WHEN システムが初期化される THEN ホロライブ公式サイト（https://hololive.hololivepro.com/talents）の情報を基にしたタレントマスターデータが作成される SHALL
2. WHEN タレントマスターデータが作成される THEN 以下の情報が含まれる SHALL:
   - タレント名（日本語・英語）
   - 所属カテゴリ（ホロライブJP、ホロライブDEV_IS、ホロライブEN、ホロライブID）
   - 世代情報（0期生、1期生、2期生等）
3. WHEN タレントマスターデータが更新される THEN 新規タレントや所属変更が反映される SHALL
4. WHEN マスターデータが参照される THEN 配信者名の表記揺れ（スペース、記号等）に対応できる SHALL

### 要件2: データ構造の拡張

**ユーザーストーリー:** システム管理者として、各配信者にカテゴリ情報を付与したいので、タレントマスターデータとの照合によりカテゴリを自動判定・付与できるようにしたい

#### 受入基準

1. WHEN スケジュール取得スクリプトが実行される THEN システムは配信者名をタレントマスターデータと照合する SHALL
2. WHEN 配信者名がマスターデータと一致する THEN 対応するカテゴリが付与される SHALL
3. WHEN 配信者名がマスターデータと一致しない THEN "その他" カテゴリが付与される SHALL
4. WHEN JSONデータが生成される THEN 各配信データにcategoryフィールドが含まれる SHALL
5. WHEN 名前の表記揺れがある THEN 正規化処理により正しいカテゴリが判定される SHALL

### 要件3: フロントエンド表示機能

**ユーザーストーリー:** サイト利用者として、配信者をカテゴリ別に整理して表示したいので、グループごとに配信者を絞り込めるようにしたい

#### 受入基準

1. WHEN ユーザーがサイトにアクセスする THEN 配信者フィルターにカテゴリ選択機能が表示される SHALL
2. WHEN ユーザーがカテゴリを選択する THEN 該当カテゴリの配信者のみが表示される SHALL
3. WHEN ユーザーが「すべて表示」を選択する THEN 全カテゴリの配信者が表示される SHALL
4. WHEN カテゴリが選択されている THEN 選択されたカテゴリが視覚的に識別できる SHALL
5. WHEN 配信者ボタンが表示される THEN カテゴリごとにグループ化されて表示される SHALL

### 要件4: 多言語対応

**ユーザーストーリー:** 英語版サイトの利用者として、カテゴリ名が英語で表示されることを期待するので、適切な英語表記でカテゴリが表示されるようにしたい

#### 受入基準

1. WHEN 英語版サイトでカテゴリが表示される THEN 以下の英語名で表示される SHALL:
   - "Hololive JP" (ホロライブJP)
   - "Hololive DEV_IS" (ホロライブDEV_IS)
   - "Hololive EN" (ホロライブEN)
   - "Hololive ID" (ホロライブID)
2. WHEN 言語が切り替えられる THEN カテゴリ名も適切な言語で表示される SHALL

### 要件5: 既存機能との互換性

**ユーザーストーリー:** 既存のサイト利用者として、現在の機能が引き続き動作することを期待するので、カテゴリ機能追加後も既存の絞り込み・検索機能が正常に動作するようにしたい

#### 受入基準

1. WHEN カテゴリ機能が追加される THEN 既存の配信者フィルター機能が正常に動作する SHALL
2. WHEN カテゴリ機能が追加される THEN 既存のタグフィルター機能が正常に動作する SHALL
3. WHEN カテゴリ機能が追加される THEN 既存のソート機能が正常に動作する SHALL
4. WHEN カテゴリ機能が追加される THEN 既存のURL共有機能が正常に動作する SHALL
5. WHEN 既存のJSONデータが読み込まれる THEN categoryフィールドがない場合でもエラーが発生しない SHALL

### 要件6: パフォーマンス要件

**ユーザーストーリー:** サイト利用者として、カテゴリ機能追加後もサイトの表示速度が維持されることを期待するので、パフォーマンスの劣化がないようにしたい

#### 受入基準

1. WHEN カテゴリフィルターが適用される THEN 配信者ボタンの表示が1秒以内に完了する SHALL
2. WHEN カテゴリが切り替えられる THEN UIの応答が500ms以内に開始される SHALL
3. WHEN 大量の配信者データが処理される THEN メモリ使用量が現在の1.5倍を超えない SHALL

### 要件7: データ整合性

**ユーザーストーリー:** システム管理者として、データの整合性が保たれることを期待するので、カテゴリ情報が正確に管理されるようにしたい

#### 受入基準

1. WHEN スケジュール取得が実行される THEN 全ての配信者に適切なカテゴリが付与される SHALL
2. WHEN 新しい配信者が追加される THEN タレントマスターデータとの照合により適切なカテゴリが判定・付与される SHALL
3. WHEN カテゴリ判定でエラーが発生する THEN ログに詳細なエラー情報が記録される SHALL
4. WHEN タレントマスターデータにない配信者が検出される THEN "その他" カテゴリが付与され、ログに記録される SHALL
5. WHEN タレントマスターデータが更新される THEN 既存データとの整合性が保たれる SHALL

### 要件8: タレントマスターデータの保守性

**ユーザーストーリー:** システム管理者として、タレントマスターデータを効率的に管理したいので、メンテナンスしやすい形式でデータを保持・更新できるようにしたい

#### 受入基準

1. WHEN タレントマスターデータが作成される THEN JSONまたはYAML形式で管理される SHALL
2. WHEN 新しいタレントが追加される THEN マスターデータファイルを手動で更新できる SHALL
3. WHEN マスターデータが更新される THEN バリデーション機能により不正なデータが検出される SHALL
4. WHEN マスターデータにコメントが必要な場合 THEN 可読性の高い形式で記述できる SHALL
5. WHEN マスターデータの変更履歴が必要な場合 THEN Gitによるバージョン管理が可能である SHALL